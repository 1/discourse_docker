# IMPORTANT: SET A SECRET PASSWORD in Postgres for the Discourse User
# SOME_SECRET in this template

templates:
  - "templates/sshd.template.yml"
  - "templates/web.template.yml"

expose:
  - "80:80"
  - "2222:22"

params:

# your ssh key can go here, or you can use ssh-import-id
  ssh_key: ""
  version: HEAD

# developer emails allow you to fast track account creation on the site
env:
  # add emails here
  DEVELOPER_EMAILS: ''
  POSTGRES_SOCKET: ''
  POSTGRES_URL: pg://discourse:SOME_SECRET@YOUR_IP_ADDRESS
  POSTGRES_DB: discourse
  DISCOURSE_HOSTNAME: 'www.example.com'
  REDIS_ADDRESS: YOUR_IP_ADDRESS
  # don't forget to set mail
  # SMTP_URL: 'smtp://user@example.com:password@smtp.mandrillapp.com:587'

volumes:
  - volume:
        host: /var/docker/shared
        guest: /shared

# you may use the docker manager to upgrade and monitor your docker image
# UI will be visible at http://yoursite.com/admin/docker
hooks:
# you may import your key using launchpad if needed
#after_sshd:
#    - exec: ssh-import-id some-user
  after_code:
    - exec:
        cd: $home/plugins
        cmd:
          - mkdir -p plugins
          - git clone https://github.com/discourse/docker_manager.git
